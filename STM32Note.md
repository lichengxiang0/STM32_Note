# 点亮LED  

Cortex-M3(简称“CM3”)处理器内核是单片机的中央处理单元，由ARM授权后，厂家添加自己的外设。  

![STM32单片机](images/STM32单片机内部结构.webp "STM32单片机")  

注：这个图片使用Hbuilder看不到效果，添加图片的语法是正确的，验证效果在网页上可以看的到。  

对于单片机用户来说，单片机提供的三大资源分别是程序存储空间、数据存储空间和特殊功能寄存器。顾名思义，程序存储空间是用来存储用户写的代码的，数据存储空间用来存储程序运行过程中需要的以及产生的数据，特殊功能寄存器用来控制单片机执行各种不同的功能，用户通过读写特殊功能寄存器让单片机执行不同的功能。STM32F103ZE这款单片机，有512K字节的FLASH（程序存储空间），64K字节的静态SRAM（数据存储空间）。  

## 单片机最小系统  
单片机最小系统，也叫做单片机最小应用系统，是指用最小的原件组成单片机可以工作的最小系统。电源、晶振和复位电路是单片机系统的三要素。  


## 添加启动文件  
“startup_stm32f10x_hd.s”，点击“Add”，将其添加到工程中来。文本添加完成后，还需要修改一下启动文件。如图1-21所示，启动文件150~152这三行代码如果未注释掉，则使用分号“;”注释掉，不执行这三条语句，后面使用库函数开发时才会使用。  
![启动文件](images/修改启动文件.webp "启动文件")  
修改完成后在main函数中编写程序代码，如下图：  
![工程界面](images/工程界面.webp "工程界面")   


## 编译下载  
程序编写完成后，鼠标点击图中下划线标注的快捷图标。

1、Translate，仅编译当前文件，不生成最终程序文件；

2、Build，构建生成，编译所有已修改文件，生成最终程序文件；

3、Rebuild，重新构建生成，重新编译所有文件，生成最终程序文件。

通常推荐使用第2个，可以有效节省编译时间。  
![编译程序](images/编译程序.webp "编译程序")   
编译完成后，在Keil下方Output窗口会出现相应的提示，如图1-35，Program Size: Code=1348的意思是代码占用了1348个字节的程序存储空间。RO-data（Read Only）是只读常量的大小，RW-data（Read/Write）是已初始化的可读写变量的大小，ZI-data（Zero Initialize）未初始化的可读写变量的大小。

当提示“0 Error(s), 0 warning(s)”表示的程序没有错误和警告，如果出现有错误和警告提示的话，就是Error和warning不是0，那么就要对程序进行检查，找出问题，解决好了再重新编译。  
![编译输出信息](images/编译输出信息.webp "编译输出信息")   
到此为止，程序就编译好了。连接好下载器，点击图1-36所示的按钮或者点击“Flash->Download”将代码下载到单片机中，即可完成程序下载，同时也完成了点亮LED小灯实验。  
![下载程序](images/下载程序.webp "下载程序")  
